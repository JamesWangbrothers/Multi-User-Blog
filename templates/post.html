{% extends "base.html" %}

{% block content %}
<div>
	<h2>{{post.subject}}</h2>
    <small>Posted by {{post.user.name}} on {{post.created.strftime("%b %d, %Y")}}</small>
    <p class="content">{{post.content | safe}}</p>
</div>
{% if user %}
	<form method = "POST">

		<input type="submit" name="edit" value="&#9998; edit">
    	<input type="submit" name="delete" value="&#9003; delete">

    	{% if likes  == 0 %}
    	<input type="submit" name="like" value="&#128077;">
    	{% else %}
		<input type="submit" name="like" value="{{likes}} &#128077;">
		{% endif %}

		{% if dislikes == 0 %}
    	<input type="submit" name="dislike" value="&#128078;">
    	{% else %}
    	<input type="submit" name="dislike" value="{{dislikes}} &#128078;">
    	{% endif %}


	</form>
	<span>{{error}}</span>
{% endif %}
<hr>
<h2>Comments</h2>
{% for comment in comments %}
	<strong>{{comment.text}}</strong>
	<br>
	<small>Posted by {{comment.user.name}} on {{comment.created.strftime("%b, %d, %Y")}}</small>
	{% if comment.user.name == user.name %}
		<a href="/blog/{{post.key().id()}}/editcomment/{{comment.key().id()}}">edit</a>
		<a href="/blog/{{post.key().id()}}/deletecomment/{{comment.key().id()}}">delete</a>
	{% endif %}
	<br><br>
{% endfor %}
<br>
{% if user %}
	<form method="POST">
		<label>
			Add Comment<br>
			<textarea name="comment_text" style="width:800px; height:150px;">{{comment_text | safe}}</textarea>
		</label>
		<span>{{comment_error}}</span>
		<input type="submit" name="add_comment" value="Post">
	</form>
{% endif %}
{% endblock %}